<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏≠Â≠¶ÂèóÈ®ì Á§æ‰ºöÁßëÂïèÈ°å</title>
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        button:hover {
            opacity: 0.9;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #2196F3;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback } = React;

        // ÂïèÈ°å„Éá„Éº„Çø„Éô„Éº„Çπ
        const questionBank = [
            {
                id: '1',
                category: 'Âú∞ÁêÜ',
                subcategory: 'Êó•Êú¨„ÅÆÂú∞ÂΩ¢',
                difficulty: 'basic',
                question: 'Êó•Êú¨„Åß‰∏ÄÁï™È´ò„ÅÑÂ±±„ÅØ‰Ωï„Åß„Åô„ÅãÔºü',
                type: 'multiple-choice',
                options: ['ÂØåÂ£´Â±±', 'ÂåóÂ≤≥', 'Â••Á©ÇÈ´òÂ≤≥', 'Èñì„ÉéÂ≤≥'],
                answer: 0,
                explanation: 'ÂØåÂ£´Â±±„ÅØÊ®ôÈ´ò3,776m„ÅßÊó•Êú¨„Åß‰∏ÄÁï™È´ò„ÅÑÂ±±„Åß„Åô„ÄÇÈùôÂ≤°Áúå„Å®Â±±Ê¢®Áúå„Å´„Åæ„Åü„Åå„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                points: 1
            },
            {
                id: '2',
                category: 'Âú∞ÁêÜ',
                subcategory: 'Êó•Êú¨„ÅÆÊ∞óÂÄô',
                difficulty: 'standard',
                question: 'Êó•Êú¨„ÅÆÊ∞óÂÄô„Å´Â§ß„Åç„Å™ÂΩ±Èüø„Çí‰∏é„Åà„ÇãÊµ∑ÊµÅ„Åß„ÄÅÊöñÊµÅ„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü',
                type: 'multiple-choice',
                options: ['ÈªíÊΩÆ', 'Ë¶™ÊΩÆ', '„É™„Éû„É≥Êµ∑ÊµÅ', 'ÂØæÈ¶¨Êµ∑ÊµÅ'],
                answer: 0,
                explanation: 'ÈªíÊΩÆÔºàÊó•Êú¨Êµ∑ÊµÅÔºâ„ÅØÂ§™Âπ≥Ê¥ãÂÅ¥„ÇíÂåó‰∏ä„Åô„ÇãÊöñÊµÅ„Åß„ÄÅÊó•Êú¨„ÅÆÊ∞óÂÄô„ÇíÊ∏©Êöñ„Å´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                points: 2
            },
            {
                id: '3',
                category: 'Ê≠¥Âè≤',
                subcategory: 'Âè§‰ª£',
                difficulty: 'basic',
                question: 'ÈÇ™È¶¨Âè∞ÂõΩ„ÅÆÂ•≥Áéã„Å®„Åó„Å¶ÊúâÂêç„Å™‰∫∫Áâ©„ÅØÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Åß„Åô„ÄÇ',
                type: 'fill-in-blank',
                answer: 'ÂçëÂº•Âëº',
                explanation: 'ÂçëÂº•Âëº„ÅØ3‰∏ñÁ¥ÄÈ†É„ÅÆÈÇ™È¶¨Âè∞ÂõΩ„ÅÆÂ•≥Áéã„Åß„ÄÅ‰∏≠ÂõΩ„ÅÆÂè≤Êõ∏„ÄåÈ≠èÂøóÂÄ≠‰∫∫‰ºù„Äç„Å´Ë®òÈå≤„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                points: 1
            },
            {
                id: '4',
                category: 'Ê≠¥Âè≤',
                subcategory: 'Âπ≥ÂÆâÊôÇ‰ª£',
                difficulty: 'standard',
                question: 'Âπ≥ÂÆâ‰∫¨„Åå‰Ωú„Çâ„Çå„Åü„ÅÆ„ÅØ‰ΩïÂπ¥„Åß„Åô„ÅãÔºü',
                type: 'multiple-choice',
                options: ['784Âπ¥', '794Âπ¥', '804Âπ¥', '814Âπ¥'],
                answer: 1,
                explanation: 'Âπ≥ÂÆâ‰∫¨„ÅØ794Âπ¥„Å´Ê°ìÊ≠¶Â§©Áöá„Å´„Çà„Å£„Å¶Âª∫Ë®≠„Åï„Çå„Åæ„Åó„Åü„ÄÇ„ÄåÈ≥¥„Åè„ÇàÔºà794Ôºâ„ÅÜ„Åê„ÅÑ„ÅôÂπ≥ÂÆâ‰∫¨„Äç„Å®„ÅÑ„ÅÜË™ûÂëÇÂêà„Çè„Åõ„ÅßË¶ö„Åà„Çâ„Çå„Åæ„Åô„ÄÇ',
                points: 2
            },
            {
                id: '5',
                category: 'ÂÖ¨Ê∞ë',
                subcategory: 'Êó•Êú¨ÂõΩÊÜ≤Ê≥ï',
                difficulty: 'basic',
                question: 'Êó•Êú¨ÂõΩÊÜ≤Ê≥ï„ÅÆ‰∏âÂ§ßÂéüÂâá„Å´Âê´„Åæ„Çå„Å™„ÅÑ„ÇÇ„ÅÆ„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü',
                type: 'multiple-choice',
                options: ['ÂõΩÊ∞ë‰∏ªÊ®©', 'Âü∫Êú¨ÁöÑ‰∫∫Ê®©„ÅÆÂ∞äÈáç', 'Âπ≥Âíå‰∏ªÁæ©', 'Ë≠∞Èô¢ÂÜÖÈñ£Âà∂'],
                answer: 3,
                explanation: 'Êó•Êú¨ÂõΩÊÜ≤Ê≥ï„ÅÆ‰∏âÂ§ßÂéüÂâá„ÅØ„ÄåÂõΩÊ∞ë‰∏ªÊ®©„Äç„ÄåÂü∫Êú¨ÁöÑ‰∫∫Ê®©„ÅÆÂ∞äÈáç„Äç„ÄåÂπ≥Âíå‰∏ªÁæ©„Äç„Åß„Åô„ÄÇË≠∞Èô¢ÂÜÖÈñ£Âà∂„ÅØÁµ±Ê≤ªÊ©üÊßã„ÅÆ‰ªïÁµÑ„Åø„Åß„Åô„ÄÇ',
                points: 2
            },
            {
                id: '6',
                category: 'Âú∞ÁêÜ',
                subcategory: '‰∏ñÁïå„ÅÆÂõΩ„ÄÖ',
                difficulty: 'advanced',
                question: '‰∏ñÁïå„Åß‰∏ÄÁï™Èù¢Á©ç„ÅåÂ§ß„Åç„ÅÑÂõΩ„ÅØ„É≠„Ç∑„Ç¢„Åß„ÅÇ„Çã„ÄÇ',
                type: 'true-false',
                answer: 1,
                explanation: '„É≠„Ç∑„Ç¢„ÅØ‰∏ñÁïåÊúÄÂ§ß„ÅÆÈù¢Á©ç„ÇíÊåÅ„Å§ÂõΩ„Åß„ÄÅÁ¥Ñ1,707‰∏áÂπ≥Êñπ„Ç≠„É≠„É°„Éº„Éà„É´„Åß„Åô„ÄÇ',
                points: 1
            },
            {
                id: '7',
                category: 'Ê≠¥Âè≤',
                subcategory: 'Êà¶ÂõΩÊôÇ‰ª£',
                difficulty: 'standard',
                question: '1600Âπ¥„ÅÆÈñ¢„É∂Âéü„ÅÆÊà¶„ÅÑ„ÅßÂãùÂà©„Åó„Åü„ÅÆ„ÅØÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Åß„Åô„ÄÇ',
                type: 'fill-in-blank',
                answer: 'Âæ≥Â∑ùÂÆ∂Â∫∑',
                explanation: 'Âæ≥Â∑ùÂÆ∂Â∫∑„ÅåÁü≥Áî∞‰∏âÊàê„Çâ„ÅÆË•øËªç„ÇíÁ†¥„Çä„ÄÅ„Åù„ÅÆÂæåÊ±üÊà∏ÂπïÂ∫ú„ÇíÈñã„Åç„Åæ„Åó„Åü„ÄÇ',
                points: 2
            },
            {
                id: '8',
                category: 'ÂÖ¨Ê∞ë',
                subcategory: 'ÊîøÊ≤ªÂà∂Â∫¶',
                difficulty: 'advanced',
                question: 'Ë°ÜË≠∞Èô¢Ë≠∞Âì°„ÅÆ‰ªªÊúü„ÅØ‰ΩïÂπ¥„Åß„Åô„ÅãÔºü',
                type: 'multiple-choice',
                options: ['3Âπ¥', '4Âπ¥', '5Âπ¥', '6Âπ¥'],
                answer: 1,
                explanation: 'Ë°ÜË≠∞Èô¢Ë≠∞Âì°„ÅÆ‰ªªÊúü„ÅØ4Âπ¥„Åß„ÅôÔºà„Åü„Å†„ÅóËß£Êï£„Å´„Çà„ÇäÁü≠Á∏Æ„Åï„Çå„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„ÅôÔºâ„ÄÇÂèÇË≠∞Èô¢Ë≠∞Âì°„ÅØ6Âπ¥„Åß„Åô„ÄÇ',
                points: 3
            },
            {
                id: '9',
                category: 'Âú∞ÁêÜ',
                subcategory: 'Êó•Êú¨„ÅÆÂú∞ÂΩ¢',
                difficulty: 'standard',
                question: 'Êó•Êú¨ÂàóÂ≥∂„Çí4„Å§„ÅÆÂ§ß„Åç„Å™Â≥∂„Å´ÂàÜ„Åë„ÅüÊôÇ„ÄÅÈù¢Á©ç„Åå2Áï™ÁõÆ„Å´Â§ß„Åç„ÅÑÂ≥∂„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü',
                type: 'multiple-choice',
                options: ['Êú¨Â∑û', 'ÂåóÊµ∑ÈÅì', '‰πùÂ∑û', 'ÂõõÂõΩ'],
                answer: 1,
                explanation: 'Êó•Êú¨„ÅÆ4„Å§„ÅÆÂ§ß„Åç„Å™Â≥∂„ÅÆÈù¢Á©çÈ†Ü„ÅØ„ÄÅÊú¨Â∑û„ÄÅÂåóÊµ∑ÈÅì„ÄÅ‰πùÂ∑û„ÄÅÂõõÂõΩ„Åß„Åô„ÄÇ',
                points: 2
            },
            {
                id: '10',
                category: 'Âú∞ÁêÜ',
                subcategory: 'Êó•Êú¨„ÅÆÂ∑ù',
                difficulty: 'basic',
                question: 'Êó•Êú¨„Åß‰∏ÄÁï™Èï∑„ÅÑÂ∑ù„ÅØÔºà„ÄÄ„ÄÄ„ÄÄÔºâÂ∑ù„Åß„Åô„ÄÇ',
                type: 'fill-in-blank',
                answer: '‰ø°ÊøÉ',
                explanation: '‰ø°ÊøÉÂ∑ù„ÅØÈï∑ÈáéÁúå„Åã„ÇâÊñ∞ÊΩüÁúå„Å´ÊµÅ„Çå„ÇãÂ∑ù„Åß„ÄÅÂÖ®Èï∑367km„Å®Êó•Êú¨„ÅßÊúÄ„ÇÇÈï∑„ÅÑÂ∑ù„Åß„Åô„ÄÇ',
                points: 1
            }
        ];

        // „ÇØ„Ç§„Ç∫„É≠„Ç∏„ÉÉ„ÇØ
        function useQuiz() {
            const [currentSession, setCurrentSession] = useState(null);
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);

            const startQuiz = useCallback((options = {}) => {
                let filteredQuestions = [...questionBank];

                if (options.category) {
                    filteredQuestions = filteredQuestions.filter(q => q.category === options.category);
                }
                
                if (options.difficulty) {
                    filteredQuestions = filteredQuestions.filter(q => q.difficulty === options.difficulty);
                }

                const questionCount = Math.min(options.questionCount || 10, filteredQuestions.length);
                const selectedQuestions = filteredQuestions
                    .sort(() => Math.random() - 0.5)
                    .slice(0, questionCount);

                const session = {
                    id: Date.now().toString(),
                    questions: selectedQuestions,
                    answers: new Array(selectedQuestions.length).fill(null),
                    startTime: new Date(),
                    maxScore: selectedQuestions.reduce((sum, q) => sum + q.points, 0)
                };

                setCurrentSession(session);
                setCurrentQuestionIndex(0);
            }, []);

            const answerQuestion = useCallback((answer) => {
                if (!currentSession) return;

                const updatedAnswers = [...currentSession.answers];
                updatedAnswers[currentQuestionIndex] = answer;

                setCurrentSession({
                    ...currentSession,
                    answers: updatedAnswers
                });
            }, [currentSession, currentQuestionIndex]);

            const nextQuestion = useCallback(() => {
                if (!currentSession) return;
                
                if (currentQuestionIndex < currentSession.questions.length - 1) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                }
            }, [currentSession, currentQuestionIndex]);

            const previousQuestion = useCallback(() => {
                if (currentQuestionIndex > 0) {
                    setCurrentQuestionIndex(currentQuestionIndex - 1);
                }
            }, [currentQuestionIndex]);

            const finishQuiz = useCallback(() => {
                if (!currentSession) return null;

                const results = currentSession.questions.map((question, index) => {
                    const userAnswer = currentSession.answers[index];
                    const correctAnswer = question.answer;
                    const isCorrect = userAnswer === correctAnswer;

                    return {
                        questionId: question.id,
                        isCorrect,
                        userAnswer,
                        correctAnswer
                    };
                });

                const score = results.reduce((sum, result, index) => {
                    return sum + (result.isCorrect ? currentSession.questions[index].points : 0);
                }, 0);

                const correctAnswers = results.filter(r => r.isCorrect).length;

                const quizResult = {
                    sessionId: currentSession.id,
                    score,
                    maxScore: currentSession.maxScore,
                    percentage: Math.round((score / currentSession.maxScore) * 100),
                    correctAnswers,
                    totalQuestions: currentSession.questions.length,
                    results
                };

                setCurrentSession(null);
                setCurrentQuestionIndex(0);

                return quizResult;
            }, [currentSession]);

            const getCurrentQuestion = useCallback(() => {
                if (!currentSession) return null;
                return currentSession.questions[currentQuestionIndex] || null;
            }, [currentSession, currentQuestionIndex]);

            const isLastQuestion = currentSession ? currentQuestionIndex === currentSession.questions.length - 1 : false;
            const isFirstQuestion = currentQuestionIndex === 0;
            const progress = currentSession ? ((currentQuestionIndex + 1) / currentSession.questions.length) * 100 : 0;

            return {
                currentSession,
                currentQuestionIndex,
                startQuiz,
                answerQuestion,
                nextQuestion,
                previousQuestion,
                finishQuiz,
                getCurrentQuestion,
                isLastQuestion,
                isFirstQuestion,
                progress
            };
        }

        // „ÇØ„Ç§„Ç∫Ë®≠ÂÆö„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        function QuizSetup({ onStartQuiz }) {
            const [category, setCategory] = useState('');
            const [difficulty, setDifficulty] = useState('');
            const [questionCount, setQuestionCount] = useState(5);

            const handleStart = () => {
                onStartQuiz({
                    category: category || undefined,
                    difficulty: difficulty || undefined,
                    questionCount
                });
            };

            return React.createElement('div', {
                style: {
                    maxWidth: '500px',
                    margin: '0 auto',
                    padding: '30px',
                    textAlign: 'center'
                }
            }, [
                React.createElement('h1', {
                    key: 'title',
                    style: { 
                        marginBottom: '30px',
                        color: '#333',
                        fontSize: '28px'
                    }
                }, '‰∏≠Â≠¶ÂèóÈ®ì Á§æ‰ºöÁßëÂïèÈ°å'),

                React.createElement('div', {
                    key: 'setup',
                    style: {
                        backgroundColor: '#f9f9f9',
                        padding: '30px',
                        borderRadius: '10px',
                        marginBottom: '20px'
                    }
                }, [
                    React.createElement('h2', {
                        key: 'setup-title',
                        style: { marginBottom: '20px', fontSize: '20px' }
                    }, '„ÇØ„Ç§„Ç∫Ë®≠ÂÆö'),

                    React.createElement('div', {
                        key: 'category',
                        style: { marginBottom: '20px', textAlign: 'left' }
                    }, [
                        React.createElement('label', {
                            key: 'category-label',
                            style: { 
                                display: 'block', 
                                marginBottom: '8px',
                                fontWeight: 'bold'
                            }
                        }, 'ÂàÜÈáé„ÇíÈÅ∏Êäû:'),
                        React.createElement('select', {
                            key: 'category-select',
                            value: category,
                            onChange: (e) => setCategory(e.target.value),
                            style: {
                                width: '100%',
                                padding: '10px',
                                fontSize: '16px',
                                border: '2px solid #ddd',
                                borderRadius: '6px'
                            }
                        }, [
                            React.createElement('option', { key: 'all', value: '' }, '„Åô„Åπ„Å¶„ÅÆÂàÜÈáé'),
                            React.createElement('option', { key: 'geo', value: 'Âú∞ÁêÜ' }, 'Âú∞ÁêÜ'),
                            React.createElement('option', { key: 'his', value: 'Ê≠¥Âè≤' }, 'Ê≠¥Âè≤'),
                            React.createElement('option', { key: 'civ', value: 'ÂÖ¨Ê∞ë' }, 'ÂÖ¨Ê∞ë')
                        ])
                    ]),

                    React.createElement('div', {
                        key: 'difficulty',
                        style: { marginBottom: '20px', textAlign: 'left' }
                    }, [
                        React.createElement('label', {
                            key: 'difficulty-label',
                            style: { 
                                display: 'block', 
                                marginBottom: '8px',
                                fontWeight: 'bold'
                            }
                        }, 'Èõ£ÊòìÂ∫¶„ÇíÈÅ∏Êäû:'),
                        React.createElement('select', {
                            key: 'difficulty-select',
                            value: difficulty,
                            onChange: (e) => setDifficulty(e.target.value),
                            style: {
                                width: '100%',
                                padding: '10px',
                                fontSize: '16px',
                                border: '2px solid #ddd',
                                borderRadius: '6px'
                            }
                        }, [
                            React.createElement('option', { key: 'all', value: '' }, '„Åô„Åπ„Å¶„ÅÆÈõ£ÊòìÂ∫¶'),
                            React.createElement('option', { key: 'basic', value: 'basic' }, 'Âü∫Êú¨'),
                            React.createElement('option', { key: 'standard', value: 'standard' }, 'Ê®ôÊ∫ñ'),
                            React.createElement('option', { key: 'advanced', value: 'advanced' }, 'Áô∫Â±ï')
                        ])
                    ]),

                    React.createElement('div', {
                        key: 'count',
                        style: { marginBottom: '30px', textAlign: 'left' }
                    }, [
                        React.createElement('label', {
                            key: 'count-label',
                            style: { 
                                display: 'block', 
                                marginBottom: '8px',
                                fontWeight: 'bold'
                            }
                        }, `ÂïèÈ°åÊï∞: ${questionCount}Âïè`),
                        React.createElement('input', {
                            key: 'count-input',
                            type: 'range',
                            min: '3',
                            max: '10',
                            value: questionCount,
                            onChange: (e) => setQuestionCount(parseInt(e.target.value)),
                            style: { width: '100%' }
                        }),
                        React.createElement('div', {
                            key: 'count-range',
                            style: { 
                                display: 'flex', 
                                justifyContent: 'space-between',
                                fontSize: '12px',
                                color: '#666',
                                marginTop: '5px'
                            }
                        }, [
                            React.createElement('span', { key: 'min' }, '3Âïè'),
                            React.createElement('span', { key: 'max' }, '10Âïè')
                        ])
                    ]),

                    React.createElement('button', {
                        key: 'start-button',
                        onClick: handleStart,
                        style: {
                            backgroundColor: '#4CAF50',
                            color: 'white',
                            border: 'none',
                            padding: '15px 30px',
                            fontSize: '18px',
                            borderRadius: '8px',
                            cursor: 'pointer',
                            width: '100%'
                        }
                    }, '„ÇØ„Ç§„Ç∫„ÇíÈñãÂßã„Åô„Çã')
                ]),

                React.createElement('div', {
                    key: 'description',
                    style: { 
                        fontSize: '14px', 
                        color: '#666',
                        lineHeight: '1.5'
                    }
                }, [
                    'Â∞èÂ≠¶6Âπ¥ÁîüÂêë„Åë„ÅÆ‰∏≠Â≠¶ÂèóÈ®ìÂØæÁ≠ñÂïèÈ°å„Åß„Åô„ÄÇ',
                    React.createElement('br', { key: 'br' }),
                    'Âú∞ÁêÜ„ÉªÊ≠¥Âè≤„ÉªÂÖ¨Ê∞ë„ÅÆÂêÑÂàÜÈáé„Åã„ÇâÂá∫È°å„Åï„Çå„Åæ„Åô„ÄÇ'
                ])
            ]);
        }

        // ÂïèÈ°å„Ç´„Éº„Éâ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        function QuestionCard({ question, currentAnswer, onAnswerChange, questionNumber, totalQuestions }) {
            const getDifficultyColor = (difficulty) => {
                switch (difficulty) {
                    case 'basic': return '#4CAF50';
                    case 'standard': return '#FF9800';
                    case 'advanced': return '#F44336';
                    default: return '#999';
                }
            };

            const getDifficultyText = (difficulty) => {
                switch (difficulty) {
                    case 'basic': return 'Âü∫Êú¨';
                    case 'standard': return 'Ê®ôÊ∫ñ';
                    case 'advanced': return 'Áô∫Â±ï';
                    default: return '';
                }
            };

            const renderAnswerInput = () => {
                switch (question.type) {
                    case 'multiple-choice':
                        return question.options.map((option, index) => 
                            React.createElement('label', {
                                key: index,
                                style: {
                                    display: 'block',
                                    margin: '10px 0',
                                    padding: '10px',
                                    border: '2px solid #ddd',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    backgroundColor: currentAnswer === index ? '#e3f2fd' : 'white',
                                    borderColor: currentAnswer === index ? '#2196F3' : '#ddd'
                                }
                            }, [
                                React.createElement('input', {
                                    key: 'radio',
                                    type: 'radio',
                                    name: `question-${question.id}`,
                                    checked: currentAnswer === index,
                                    onChange: () => onAnswerChange(index),
                                    style: { marginRight: '10px' }
                                }),
                                option
                            ])
                        );

                    case 'fill-in-blank':
                        return React.createElement('input', {
                            type: 'text',
                            value: currentAnswer || '',
                            onChange: (e) => onAnswerChange(e.target.value),
                            placeholder: 'Á≠î„Åà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                            style: {
                                width: '100%',
                                padding: '12px',
                                fontSize: '16px',
                                border: '2px solid #ddd',
                                borderRadius: '6px',
                                marginTop: '10px'
                            }
                        });

                    case 'true-false':
                        return React.createElement('div', {
                            style: { display: 'flex', gap: '20px', marginTop: '10px' }
                        }, [
                            React.createElement('label', {
                                key: 'true',
                                style: {
                                    display: 'flex',
                                    alignItems: 'center',
                                    padding: '10px 20px',
                                    border: '2px solid #ddd',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    backgroundColor: currentAnswer === 1 ? '#e8f5e8' : 'white',
                                    borderColor: currentAnswer === 1 ? '#4CAF50' : '#ddd'
                                }
                            }, [
                                React.createElement('input', {
                                    key: 'radio',
                                    type: 'radio',
                                    name: `question-${question.id}`,
                                    checked: currentAnswer === 1,
                                    onChange: () => onAnswerChange(1),
                                    style: { marginRight: '8px' }
                                }),
                                'Ê≠£„Åó„ÅÑ'
                            ]),
                            React.createElement('label', {
                                key: 'false',
                                style: {
                                    display: 'flex',
                                    alignItems: 'center',
                                    padding: '10px 20px',
                                    border: '2px solid #ddd',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    backgroundColor: currentAnswer === 0 ? '#ffe8e8' : 'white',
                                    borderColor: currentAnswer === 0 ? '#F44336' : '#ddd'
                                }
                            }, [
                                React.createElement('input', {
                                    key: 'radio',
                                    type: 'radio',
                                    name: `question-${question.id}`,
                                    checked: currentAnswer === 0,
                                    onChange: () => onAnswerChange(0),
                                    style: { marginRight: '8px' }
                                }),
                                'ÈñìÈÅï„ÅÑ'
                            ])
                        ]);

                    default:
                        return null;
                }
            };

            return React.createElement('div', {
                style: {
                    maxWidth: '600px',
                    margin: '0 auto',
                    padding: '20px',
                    border: '1px solid #ddd',
                    borderRadius: '10px',
                    backgroundColor: 'white',
                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                }
            }, [
                React.createElement('div', {
                    key: 'header',
                    style: { 
                        display: 'flex', 
                        justifyContent: 'space-between', 
                        alignItems: 'center',
                        marginBottom: '20px'
                    }
                }, [
                    React.createElement('div', { key: 'info' }, [
                        React.createElement('span', {
                            key: 'difficulty',
                            style: {
                                backgroundColor: getDifficultyColor(question.difficulty),
                                color: 'white',
                                padding: '4px 8px',
                                borderRadius: '4px',
                                fontSize: '12px',
                                marginRight: '10px'
                            }
                        }, getDifficultyText(question.difficulty)),
                        React.createElement('span', {
                            key: 'category',
                            style: { fontSize: '14px', color: '#666' }
                        }, `${question.category} - ${question.subcategory}`)
                    ]),
                    React.createElement('div', {
                        key: 'progress',
                        style: { fontSize: '14px', color: '#666' }
                    }, `ÂïèÈ°å ${questionNumber} / ${totalQuestions}`)
                ]),

                React.createElement('div', {
                    key: 'question',
                    style: { 
                        fontSize: '18px', 
                        fontWeight: 'bold', 
                        marginBottom: '20px',
                        lineHeight: '1.5'
                    }
                }, question.question),

                React.createElement('div', { key: 'answers' }, renderAnswerInput()),

                React.createElement('div', {
                    key: 'points',
                    style: { 
                        marginTop: '20px', 
                        textAlign: 'right',
                        fontSize: '14px',
                        color: '#666'
                    }
                }, `ÈÖçÁÇπ: ${question.points}ÁÇπ`)
            ]);
        }

        // ÈÄ≤Êçó„Éê„Éº„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        function ProgressBar({ progress, currentQuestion, totalQuestions }) {
            return React.createElement('div', {
                style: { 
                    marginBottom: '20px',
                    padding: '0 20px'
                }
            }, [
                React.createElement('div', {
                    key: 'info',
                    style: {
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                        marginBottom: '8px'
                    }
                }, [
                    React.createElement('span', {
                        key: 'label',
                        style: { fontSize: '14px', color: '#666' }
                    }, 'ÈÄ≤Êçó'),
                    React.createElement('span', {
                        key: 'count',
                        style: { fontSize: '14px', color: '#666' }
                    }, `${currentQuestion} / ${totalQuestions}`)
                ]),
                
                React.createElement('div', {
                    key: 'bar-container',
                    style: {
                        width: '100%',
                        height: '8px',
                        backgroundColor: '#e0e0e0',
                        borderRadius: '4px',
                        overflow: 'hidden'
                    }
                }, React.createElement('div', {
                    style: {
                        width: `${progress}%`,
                        height: '100%',
                        backgroundColor: '#4CAF50',
                        borderRadius: '4px',
                        transition: 'width 0.3s ease'
                    }
                }))
            ]);
        }

        // ÁµêÊûúË°®Á§∫„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºàÁ∞°Áï•ÁâàÔºâ
        function QuizResult({ result, questions, onRestart }) {
            const [showOnlyIncorrect, setShowOnlyIncorrect] = useState(false);

            const getScoreColor = (percentage) => {
                if (percentage >= 80) return '#4CAF50';
                if (percentage >= 60) return '#FF9800';
                return '#F44336';
            };

            const getAnswerText = (question, answer) => {
                if (answer === null) return 'Êú™ÂõûÁ≠î';
                
                if (question.type === 'multiple-choice' && question.options) {
                    return question.options[answer];
                }
                
                if (question.type === 'true-false') {
                    return answer === 1 ? 'Ê≠£„Åó„ÅÑ' : 'ÈñìÈÅï„ÅÑ';
                }
                
                return String(answer);
            };

            return React.createElement('div', {
                style: { maxWidth: '800px', margin: '0 auto', padding: '20px' }
            }, [
                React.createElement('div', {
                    key: 'summary',
                    style: { 
                        textAlign: 'center', 
                        marginBottom: '30px',
                        padding: '20px',
                        backgroundColor: '#f5f5f5',
                        borderRadius: '10px'
                    }
                }, [
                    React.createElement('h2', { key: 'title' }, '„ÇØ„Ç§„Ç∫ÁµêÊûú'),
                    React.createElement('div', {
                        key: 'score',
                        style: { 
                            fontSize: '48px', 
                            fontWeight: 'bold', 
                            color: getScoreColor(result.percentage),
                            margin: '10px 0'
                        }
                    }, `${result.score}/${result.maxScore}`),
                    React.createElement('div', {
                        key: 'percentage',
                        style: { fontSize: '24px', marginBottom: '10px' }
                    }, `Ê≠£Á≠îÁéá: ${result.percentage}%`),
                    React.createElement('div', {
                        key: 'correct',
                        style: { fontSize: '18px' }
                    }, `${result.correctAnswers}/${result.totalQuestions} ÂïèÊ≠£Ëß£`)
                ]),

                React.createElement('div', {
                    key: 'details',
                    style: { marginBottom: '30px' }
                }, [
                    React.createElement('div', {
                        key: 'filter-header',
                        style: { 
                            display: 'flex', 
                            justifyContent: 'space-between', 
                            alignItems: 'center',
                            marginBottom: '20px'
                        }
                    }, [
                        React.createElement('h3', { key: 'title' }, 'Ë©≥Á¥∞ÁµêÊûú'),
                        React.createElement('div', {
                            key: 'buttons',
                            style: { display: 'flex', gap: '10px' }
                        }, [
                            React.createElement('button', {
                                key: 'all',
                                onClick: () => setShowOnlyIncorrect(false),
                                style: {
                                    backgroundColor: !showOnlyIncorrect ? '#2196F3' : '#e0e0e0',
                                    color: !showOnlyIncorrect ? 'white' : '#666',
                                    border: 'none',
                                    padding: '8px 16px',
                                    borderRadius: '4px',
                                    cursor: 'pointer',
                                    fontSize: '14px'
                                }
                            }, '„Åô„Åπ„Å¶Ë°®Á§∫'),
                            React.createElement('button', {
                                key: 'incorrect',
                                onClick: () => setShowOnlyIncorrect(true),
                                style: {
                                    backgroundColor: showOnlyIncorrect ? '#F44336' : '#e0e0e0',
                                    color: showOnlyIncorrect ? 'white' : '#666',
                                    border: 'none',
                                    padding: '8px 16px',
                                    borderRadius: '4px',
                                    cursor: 'pointer',
                                    fontSize: '14px'
                                }
                            }, '‰∏çÊ≠£Ëß£„ÅÆ„ÅøË°®Á§∫')
                        ])
                    ]),

                    showOnlyIncorrect && React.createElement('div', {
                        key: 'review-tip',
                        style: {
                            backgroundColor: '#fff3cd',
                            border: '1px solid #ffeaa7',
                            borderRadius: '6px',
                            padding: '10px',
                            marginBottom: '15px',
                            fontSize: '14px'
                        }
                    }, 'üí° Âæ©Áøí„Éù„Ç§„É≥„Éà: ‰∏çÊ≠£Ëß£„Å†„Å£„ÅüÂïèÈ°å„ÅÆËß£Ë™¨„Çí„Åó„Å£„Åã„ÇäË™≠„Çì„Åß„ÄÅÁêÜËß£„ÇíÊ∑±„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ'),

                    ...result.results
                        .filter(resultItem => showOnlyIncorrect ? !resultItem.isCorrect : true)
                        .map((resultItem, index) => {
                            const question = questions.find(q => q.id === resultItem.questionId);
                            if (!question) return null;
                            const originalIndex = result.results.findIndex(r => r.questionId === resultItem.questionId);

                            return React.createElement('div', {
                                key: resultItem.questionId,
                                style: {
                                    border: '1px solid #ddd',
                                    borderRadius: '8px',
                                    margin: '10px 0',
                                    padding: '15px',
                                    backgroundColor: resultItem.isCorrect ? '#e8f5e8' : '#ffe8e8'
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'header',
                                    style: { 
                                        display: 'flex', 
                                        alignItems: 'center', 
                                        marginBottom: '10px' 
                                    }
                                }, [
                                    React.createElement('span', {
                                        key: 'status',
                                        style: { 
                                            backgroundColor: resultItem.isCorrect ? '#4CAF50' : '#F44336',
                                            color: 'white',
                                            padding: '4px 8px',
                                            borderRadius: '4px',
                                            fontSize: '12px',
                                            marginRight: '10px'
                                        }
                                    }, resultItem.isCorrect ? 'Ê≠£Ëß£' : '‰∏çÊ≠£Ëß£'),
                                    React.createElement('span', {
                                        key: 'info',
                                        style: { fontSize: '14px', color: '#666' }
                                    }, `ÂïèÈ°å ${originalIndex + 1} - ${question.category} (${question.difficulty})`)
                                ]),
                                
                                React.createElement('div', {
                                    key: 'question',
                                    style: { marginBottom: '10px', fontWeight: 'bold' }
                                }, question.question),
                                
                                React.createElement('div', {
                                    key: 'user-answer',
                                    style: { marginBottom: '5px' }
                                }, ['„ÅÇ„Å™„Åü„ÅÆÂõûÁ≠î: ', getAnswerText(question, resultItem.userAnswer)]),
                                
                                React.createElement('div', {
                                    key: 'correct-answer',
                                    style: { marginBottom: '10px' }
                                }, ['Ê≠£Ëß£: ', getAnswerText(question, resultItem.correctAnswer)]),
                                
                                React.createElement('div', {
                                    key: 'explanation',
                                    style: { 
                                        backgroundColor: resultItem.isCorrect ? '#f0f8f0' : '#fff8f0', 
                                        padding: '10px', 
                                        borderRadius: '4px',
                                        fontSize: '14px',
                                        border: resultItem.isCorrect ? '1px solid #d4edda' : '1px solid #ffeaa7'
                                    }
                                }, ['Ëß£Ë™¨: ', question.explanation])
                            ]);
                        })
                ]),

                React.createElement('div', {
                    key: 'restart',
                    style: { textAlign: 'center' }
                }, React.createElement('button', {
                    onClick: onRestart,
                    style: {
                        backgroundColor: '#2196F3',
                        color: 'white',
                        border: 'none',
                        padding: '12px 24px',
                        fontSize: '16px',
                        borderRadius: '6px',
                        cursor: 'pointer'
                    }
                }, '„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶„Åô„Çã'))
            ]);
        }

        // „É°„Ç§„É≥„Ç¢„Éó„É™„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        function App() {
            const {
                currentSession,
                currentQuestionIndex,
                startQuiz,
                answerQuestion,
                nextQuestion,
                previousQuestion,
                finishQuiz,
                getCurrentQuestion,
                isLastQuestion,
                isFirstQuestion,
                progress
            } = useQuiz();

            const [quizResult, setQuizResult] = useState(null);
            const [completedQuestions, setCompletedQuestions] = useState([]);

            const handleStartQuiz = (options) => {
                setQuizResult(null);
                setCompletedQuestions([]);
                startQuiz(options);
            };

            const handleFinishQuiz = () => {
                if (currentSession) {
                    setCompletedQuestions(currentSession.questions);
                }
                const result = finishQuiz();
                if (result) {
                    setQuizResult(result);
                }
            };

            const handleRestart = () => {
                setQuizResult(null);
                setCompletedQuestions([]);
            };

            const currentQuestion = getCurrentQuestion();

            if (quizResult) {
                return React.createElement('div', {
                    style: { minHeight: '100vh', backgroundColor: '#f5f5f5', padding: '20px' }
                }, React.createElement(QuizResult, {
                    result: quizResult,
                    questions: completedQuestions,
                    onRestart: handleRestart
                }));
            }

            if (!currentSession || !currentQuestion) {
                return React.createElement('div', {
                    style: { minHeight: '100vh', backgroundColor: '#f5f5f5', padding: '20px' }
                }, React.createElement(QuizSetup, {
                    onStartQuiz: handleStartQuiz
                }));
            }

            return React.createElement('div', {
                style: { minHeight: '100vh', backgroundColor: '#f5f5f5', padding: '20px' }
            }, [
                React.createElement(ProgressBar, {
                    key: 'progress',
                    progress: progress,
                    currentQuestion: currentQuestionIndex + 1,
                    totalQuestions: currentSession.questions.length
                }),

                React.createElement(QuestionCard, {
                    key: 'question',
                    question: currentQuestion,
                    currentAnswer: currentSession.answers[currentQuestionIndex],
                    onAnswerChange: answerQuestion,
                    questionNumber: currentQuestionIndex + 1,
                    totalQuestions: currentSession.questions.length
                }),

                React.createElement('div', {
                    key: 'controls',
                    style: {
                        maxWidth: '600px',
                        margin: '20px auto',
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center'
                    }
                }, [
                    React.createElement('button', {
                        key: 'prev',
                        onClick: previousQuestion,
                        disabled: isFirstQuestion,
                        style: {
                            backgroundColor: isFirstQuestion ? '#ccc' : '#757575',
                            color: 'white',
                            border: 'none',
                            padding: '10px 20px',
                            borderRadius: '6px',
                            cursor: isFirstQuestion ? 'not-allowed' : 'pointer'
                        }
                    }, 'Ââç„ÅÆÂïèÈ°å'),

                    React.createElement('div', {
                        key: 'status',
                        style: { fontSize: '14px', color: '#666' }
                    }, currentSession.answers[currentQuestionIndex] !== null ? 'ÂõûÁ≠îÊ∏à„Åø' : 'Êú™ÂõûÁ≠î'),

                    isLastQuestion ? 
                        React.createElement('button', {
                            key: 'finish',
                            onClick: handleFinishQuiz,
                            style: {
                                backgroundColor: '#F44336',
                                color: 'white',
                                border: 'none',
                                padding: '10px 20px',
                                borderRadius: '6px',
                                cursor: 'pointer'
                            }
                        }, 'ÁµêÊûú„ÇíË¶ã„Çã') :
                        React.createElement('button', {
                            key: 'next',
                            onClick: nextQuestion,
                            style: {
                                backgroundColor: '#2196F3',
                                color: 'white',
                                border: 'none',
                                padding: '10px 20px',
                                borderRadius: '6px',
                                cursor: 'pointer'
                            }
                        }, 'Ê¨°„ÅÆÂïèÈ°å')
                ])
            ]);
        }

        // „Ç¢„Éó„É™„Çí„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>